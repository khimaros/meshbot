[interface]
type = "serial"
tcp_hostname = "localhost"
tcp_port = 4403
tcp_timeout = 60
device = "/dev/ttyACM0"
ble_address = ""
# Time in seconds without receiving packets before considering connection stale (0 to disable)
health_check_timeout = 120

[general]
default_location = "Planet Earth"
default_metrics = "unavailable"
neighbor_timeout = 14400

[traceroute]
enabled = false
# Time in seconds before a node is considered stale and needs a traceroute
stale_timeout = 1800
# Minimum time in seconds between traceroute requests (after completion)
rate_limit = 300
# Time in seconds to wait for a traceroute response before timing out
request_timeout = 45

[paths]
data_dir = "./data/"

[channel]
reply_direct = false
reply_prepend_shortname = true
unsolicited_ratio = 0.0
unsolicited_ratio_map = {}
idle_frequency = 0
idle_start_hour = 6
idle_end_hour = 22

[llm]
api_base = "http://localhost:7860/v1"
api_key = "fake"
command_prefixes = ["AI: ", "AI ", "LLM: ", "LLM "]
default_model = "gemma-3-4b-it:Q4_K_M"
default_max_tokens = 35
default_max_reasoning_tokens = 100
context_buffer_size = 10
enable_streaming = true
system_prompt = "You are {longname} (short name: {shortname}), an amateur radio operator responding over 915MHz LoRa (Meshtastic) from {location}. The date is {date}. Environmental metrics: {metrics}. In addition to natural language queries, you respond to the following commands: HELP, SYN, FOLLOW, STOP. You were created by khimaros (KHMR) and code is available at https://github.com/khimaros/meshbot. The following is a series of messages from a multi-user chat. Answer in one concise sentence."

idle_prompts = [
    "Make an observation about the weather and how to prepare for it",
    "Offer a time appropriate greeting to the mesh",
    "Speculate on the meaning of life",
    "Share a pop culture reference",
    "Tell me a computer or radio hacker joke",
    "Introduce yourself to the mesh",
    "State an obscure fact about your current location",
    "Offer casual advice about broadcasting over LoRa",
    "Ask an unexpected question",
    "Describe your basic functionality",
]

idle_prompt_styles = [
    "in the form of a zen koan",
    "evoking the spirit of Edgar Allen Poe",
    "using a quirky tone",
    "with a subtle sense of irony",
    "using excessive radio jargon",
    "in haiku form",
    "in the style of Robert Anton Wilson",
    "alluding to anarchist philosophy",
]

[defaults]
reply_llm = false
help_reply = "valid commands: HELP, SYN, IDLE, NEIGHBORS, FOLLOW, STOP, LLM -- unrecognized commands may be handled by a self-hosted LLM"

[rate_limiting]
window = 60
max = 15

[message]
max_length = 200
